{% trans_default_domain 'calendar' %}
{% extends 'layout.html.twig' %}
{% import 'macros.html.twig' as m %}
{% block content %}
    <form action="{{ path('work_linked_training_tracking_calendar_operation', {'id': agreement.id}) }}" class="list" method="post">
    {% embed 'wlt/tracking/calendar_partial.html.twig' %}
        {% block day %}
            <td {% if day %}class="{{ day.absence ? 'absence' : (day.activityRealizations.count == 0 ? 'workday' : 'submitted') }}"{% endif %}>
                {% if day %}
                    {% set url = path('work_linked_training_tracking_calendar_form', {'id': day.id}) %}
                    <label><input type="checkbox" name="items[]" value="{{ day.id }}" class="selectable"> <a href="{{ url }}"><b>{{ day.date|date('d') }}</b></a></label>{% if day and day.locked %} <i class="fas fa-lock"></i>{% endif %}<br/>
                    {{ 'caption.hours'|transchoice(day.hours, {}, 'calendar') }}
                {% elseif n > 0 %}
                    {{ n }}
                {% endif %}
            </td>
        {% endblock %}
    {% endembed %}

    {{ m.link_button(last_url, 'arrow-left', 'btn-info', 'form.back'|trans) }}
    {{ m.link_button('', 'check-square', 'btn-primary', 'form.select_deselect'|trans, 'toggle') }}
    {% if is_granted('WLT_AGREEMENT_ATTENDANCE', agreement) %}{{ m.submit_button('attendance', 'user-slash', 'btn-danger enable-on-items', 'form.attendance'|trans) }}{% endif %}
    </form>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('build/list.js') }}"></script>
{% endblock %}